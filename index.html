<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystal Axis Calculator for Hematite</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-50 text-gray-800">

<div class="container">
    <h1>Hematite Crystal Axis Calculator</h1>

    <div class="main-grid">
        <!-- Section 1: Crystal definition -->
        <div class="card full-width">
            <h2>1. Crystal definition in lab frame</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center mb-4">
                <div class="input-group">
                    <label for="preset-select">Predefined cut / preset</label>
                    <select id="preset-select"></select>
                </div>
            </div>
            <p class="text-sm text-gray-500 mt-2 mb-4">Choose a preset to auto-fill the axes, or enter custom values and
                compute the missing axis.</p>
            <div class="definition-container">
                <div class="axis-definition">
                    <div class="lab-axis-label">
                        <strong>Lab X ||</strong>
                        <button class="toggle-mode-btn" id="x-mode-toggle" data-mode="direction">
                            <span>Direction</span><span class="toggle-icon">⇄</span>
                        </button>
                    </div>
                    <div class="miller-bravais-input">
                        <input type="number" id="x_h" placeholder="h" aria-label="h index for Lab X">
                        <input type="number" id="x_k" placeholder="k" aria-label="k index for Lab X">
                        <input type="number" id="x_i" placeholder="i" readonly class="readonly" tabindex="-1"
                               aria-label="i index for Lab X">
                        <input type="number" id="x_l" placeholder="l" aria-label="l index for Lab X">
                    </div>
                    <div class="lab-axis-label">
                        <strong>Lab Y ||</strong>
                        <button class="toggle-mode-btn" id="y-mode-toggle" data-mode="direction">
                            <span>Direction</span><span class="toggle-icon">⇄</span>
                        </button>
                    </div>
                    <div class="miller-bravais-input">
                        <input type="number" id="y_h" placeholder="h" aria-label="h index for Lab Y">
                        <input type="number" id="y_k" placeholder="k" aria-label="k index for Lab Y">
                        <input type="number" id="y_i" placeholder="i" readonly class="readonly" tabindex="-1"
                               aria-label="i index for Lab Y">
                        <input type="number" id="y_l" placeholder="l" aria-label="l index for Lab Y">
                    </div>
                    <div class="lab-axis-label">
                        <strong>Lab Z ||</strong>
                        <button class="toggle-mode-btn" id="z-mode-toggle" data-mode="direction">
                            <span>Direction</span><span class="toggle-icon">⇄</span>
                        </button>
                    </div>
                    <div class="miller-bravais-input">
                        <input type="number" id="z_h" placeholder="h" aria-label="h index for Lab Z">
                        <input type="number" id="z_k" placeholder="k" aria-label="k index for Lab Z">
                        <input type="number" id="z_i" placeholder="i" readonly class="readonly" tabindex="-1"
                               aria-label="i index for Lab Z">
                        <input type="number" id="z_l" placeholder="l" aria-label="l index for Lab Z">
                    </div>
                </div>

                <div class="computation-controls">
                    <div class="flex justify-between items-center mb-4">
                        <button id="calculate-last-axis-btn">Calculate missing axis</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: Crystal system -->
        <div class="card" id="crystal-system">
            <h2>2. Direction in crystal frame</h2>
            <div class="input-group">
                <label>Miller-Bravais indices [h k i l]</label>
                <div class="miller-bravais-input">
                    <input type="number" step="any" id="crystal_h" placeholder="h" aria-label="crystal h index">
                    <input type="number" step="any" id="crystal_k" placeholder="k" aria-label="crystal k index">
                    <input type="number" step="any" id="crystal_i" placeholder="i" readonly class="readonly"
                           tabindex="-1" aria-label="crystal i index">
                    <input type="number" step="any" id="crystal_l" placeholder="l" aria-label="crystal l index">
                </div>
            </div>
        </div>

        <!-- Transformation buttons -->
        <div class="transformation-buttons">
            <button id="transform-to-lab-btn" title="Transform to lab frame">&rArr;</button>
            <button id="transform-to-crystal-btn" title="Transform to crystal frame">&lArr;</button>
        </div>

        <!-- Section 3: Lab system -->
        <div class="card" id="lab-system">
            <h2>3. Direction in lab frame</h2>
            <div class="input-group">
                <label>Cartesian coordinates (x, y, z)</label>
                <div class="vector-input">
                    <input type="number" step="any" id="lab_x" placeholder="x" aria-label="lab x coordinate">
                    <input type="number" step="any" id="lab_y" placeholder="y" aria-label="lab y coordinate">
                    <input type="number" step="any" id="lab_z" placeholder="z" aria-label="lab z coordinate">
                </div>
            </div>
            <div class="input-group">
                <label>Spherical coordinates</label>
                <div class="angle-input">
                    <input type="number" step="any" id="lab_theta" placeholder="θ (polar)"
                           aria-label="theta polar angle">
                    <input type="number" step="any" id="lab_phi" placeholder="φ (azimuth)"
                           aria-label="phi azimuth angle">
                </div>
                <p class="text-xs text-gray-500 mt-2" style="font-size: 12px; color: #666; grid-column: 1 / -1;">
                    <b>θ:</b> Angle to the z axis (0°-180°).<br>
                    <b>φ:</b> Angle in the xy plane (0°-360°).
                </p>
            </div>
        </div>
    </div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>
